<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="cn.com.sure.keypair.dao.KeyPairStandbyDAO">  

	<insert id="insert" parameterType="cn.com.sure.kpg.entry.KeypairStandby">
		insert into keypair_standby(
			pub_key,
			pri_key,
			kpg_algorithm,
			km_kpg_task,
			gen_time
		)values(
			#{pubKey},
			#{priKey},
			#{keyPairAlgorithm.algorithmName},
			#{kpgTask.name},
			#{genTime}
		)
	</insert>
	

	
	<select id="selectAll" parameterType="cn.com.sure.kpg.entry.KeypairStandby" resultType="cn.com.sure.kpg.entry.KeypairStandby">
		select
			id,
			pub_key as pubKey,
			pri_key as priKey,
			kpg_algorithm as keyPairAlgorithm,
			km_kpg_task as kpgTask,
			gen_time as genTime
		from
			keypair_standby
	</select>
	
		
	<select id="countNum" resultType="int" parameterType="String">
		select 
			count(0)
		from 
			keypair_standby
		where
			kpg_algorithm=#{algorithmName}
	</select>
	
	<select id="obtKpStandby" parameterType="cn.com.sure.kpg.entry.KeypairStandby" resultType="cn.com.sure.kpg.entry.KeypairStandby">
		select
			id,
			pub_key as pubKey,
			pri_key as priKey,
			kpg_algorithm as keyPairAlgorithm,
			km_kpg_task as kpgTask,
			gen_time as genTime
		from
			keypair_standby
		where
			kpg_algorithm=#{algorithmName}
		limit 
			0,1
	</select>
    
    <delete id="delete" parameterType="String">
		delete from keypair_standby where id=#{id}
	</delete>
	
</mapper>